package me.ionar.salhack.module.exploit;

import me.ionar.salhack.events.network.EventNetworkPacketEvent;
import me.ionar.salhack.events.player.EventPlayerSwingArm;
import me.ionar.salhack.module.Module;
import me.ionar.salhack.module.Value;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.network.play.client.CPacketAnimation;
import net.minecraft.util.EnumHand;

public class SwingModule extends Module
{
    public final Value<Modes> Mode = new Value<Modes>("Mode", new String[]
    { "Mode", "M" }, "The Swining mode to use", Modes.Packet);

    private enum Modes
    {
        Full, Packet, Offhand
    }
    

    public SwingModule()
    {
        super("Swing", new String[]
        { "AntiSwing" }, "Prevents swinging server-side", "NONE", 0x8D24DB, ModuleType.EXPLOIT);
    }
    
    @Override
    public String getMetaData()
    {
        return Mode.getValue().toString();
    }

    @EventHandler
    private Listener<EventNetworkPacketEvent> PacketEvent = new Listener<>(p_Event ->
    {
        if (p_Event.getPacket() instanceof CPacketAnimation && Mode.getValue() == Modes.Packet)
            p_Event.cancel();
    });

    @EventHandler
    private Listener<EventPlayerSwingArm> SwingArm = new Listener<>(p_Event ->
    {
        if (Mode.getValue() == Modes.Full)
            p_Event.cancel();
        else if (Mode.getValue() == Modes.Offhand)
            p_Event.Hand = EnumHand.OFF_HAND;
    });
}